<!DOCTYPE html>
<html lang="en">
<head>
  <title>Dragon Controller</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://unpkg.com/chart.js@2.8.0/dist/Chart.bundle.js"></script>
  <script src="https://unpkg.com/chartjs-gauge@0.3.0/dist/chartjs-gauge.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="/backend/staticd/static/style.css">
</head>
<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="/home">Dragon Controller</a>
    </div>
    <ul class="nav navbar-nav">
      <li><a href="/">Home</a></li>
      <li><a href="/">Sensors</a></li>
      <li class="active"><a>Rechner</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><a id="reload"><span class="glyphicon glyphicon-refresh"></span> Refresh</a></li>
      <li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
      <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
    </ul>
  </div>
</nav>

<div class="container">
   <form class="form-horizontal">
  <div class="form-group">
    <label class="control-label col-sm-3" for="rel_humid">Relative Humidity (%):</label>
    <div class="col-sm-3">
      <input step="0.1" min="0" max="100" type="number" class="form-control" id="rel_humid" placeholder="Relative Humidity">
    </div>
  </div>
  <div class="form-group">
    <label class="control-label col-sm-3" for="abs_humid">Absolute Humidity:</label>
    <div class="col-sm-3">
      <input step="0.1" type="number" class="form-control" id="abs_humid" placeholder="Absolute Humidity">
    </div>
  </div>
  <div class="form-group">
    <label class="control-label col-sm-3" for="temp">Temperature (Â°C):</label>
    <div class="col-sm-3">
      <input min="0" max="100" step="0.1" required type="number" class="form-control" id="temp" placeholder="Temperature">
    </div>
  </div>
</form>
    <div class="form-group">
    <div class="col-sm-offset-3 col-sm-3">
      <button class="btn btn-default" id="calculate">Calculate</button>
    </div>
  </div>
</div>

<script>
    document.getElementById('calculate').addEventListener("click", function (){
        var temperature = parseFloat(document.getElementById('temp').value);
        var relative = parseFloat(document.getElementById('rel_humid').value);
        var absolute = parseFloat(document.getElementById('abs_humid').value);

        if(isNaN(temperature)) {
            window.alert("Temperature has to be set!")
        } else {
            if (isNaN(relative) && !isNaN(absolute)){
            relative = Math.round((((273.15 + temperature)*absolute) / (6.112 * Math.exp((17.67 * temperature)/(temperature+243.5)) * 2.1674))*10)/10;
        } else if (isNaN(absolute) && !isNaN(relative)){
            absolute = Math.round(((6.112 * Math.exp((17.67 * temperature)/(temperature+243.5)) * relative * 2.1674) / (273.15 + temperature))*10)/10;
        } else {
            window.alert("Please set relative or absolute humidity, not both!")
        }
        }
        document.getElementById('temp').value = temperature;
        document.getElementById('rel_humid').value = relative;
        document.getElementById('abs_humid').value = absolute;
        });
</script>
</body>
</html>